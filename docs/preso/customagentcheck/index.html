<!DOCTYPE HTML>

<html>
    <head>
        <title>Building a Custom Agent Check</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="generator" content="Hugo 0.17" />
        


        

            <link rel="stylesheet" href="https://datadog.github.io/summit-training-session//css/google-font.css" />
            <link rel="stylesheet" href="https://datadog.github.io/summit-training-session//css/font-awesome.min.css" />
            <link rel="stylesheet" href="https://datadog.github.io/summit-training-session//css/main.css" />
            <link rel="stylesheet" href="https://datadog.github.io/summit-training-session//css/add-on.css" />
            <link rel="stylesheet" href="https://datadog.github.io/summit-training-session//css/monokai-sublime.css">
            <link rel="stylesheet" href="https://datadog.github.io/summit-training-session//reveal.js/css/reveal.css">
            <link rel="stylesheet" href="https://datadog.github.io/summit-training-session//reveal.js/css/theme/simple.css">

<style type="text/css">
        #wrapper {
        display: -moz-flex;
        display: -webkit-flex;
        display: -ms-flex;
        display: flex;
        -moz-flex-direction: row-reverse;
        -webkit-flex-direction: row-reverse;
        -ms-flex-direction: row-reverse;
        flex-direction: row-reverse;
        -moz-transition: opacity 0.5s ease;
        -webkit-transition: opacity 0.5s ease;
        -ms-transition: opacity 0.5s ease;
        transition: opacity 0.5s ease;
        margin: 0 auto;
        max-width: 100%;
        height: 100%;
        opacity: 1;
        padding: 4.5em;
        width: 100%;
    }
        .reveal section img {
            border: none;
        }
        .reveal .slides {
            text-align: left;
        }
        .reveal h1 {
            margin-bottom: 2%;
        }
        .reveal h2 {
            margin-top: 2%;
        }.reveal li, .reveal p {
            font-size: 150%;
        }
        .reveal li li {
            margin-left: 10px;
            font-size: 90%
        }
        .reveal pre {
            font-size: 150%;
        }
        .hljs-params, .hljs-class .hljs-title {
            color: grey;
        }
        .hljs-string, .hljs-type, .hljs-built_in, .hljs-builtin-name, .hljs-selector-id, .hljs-selector-attr, .hljs-selector-pseudo, .hljs-addition, .hljs-variable, .hljs-template-variable {
            color: #919;
        }
        .reveal pre code {
            max-height: 80%;
        }
        .slides {
            z-index: 10;
        }
        .footer {
          position: absolute; 
          right: 94%;
          bottom: 1px;
          z-index: 1;
        }
        .footer img {
            width:100%;
            right: 10px;
            z-index: 1;
        }
</style>

        
        
        
            
        

    </head>
    <body>

        
        <div id="wrapper">


    
<header id="header">
    
        <h2><a href="https://datadog.github.io/summit-training-session/">Session Agenda</i></a></h2>
    

    <nav class="links">
        <ul>
            
                <li>
                    <a href="/summit-training-session/preso/">
                        
                            <i class="fa fa-tv">&nbsp;</i>Presentations
                    </a>
                </li>
            
                <li>
                    <a href="/summit-training-session/notes/">
                        
                            <i class="fa fa-file-text-o">&nbsp;</i>Notes
                    </a>
                </li>
            
                <li>
                    <a href="/summit-training-session/handson/">
                        
                            <i class="fa fa-hand-stop-o">&nbsp;</i>Hands On
                    </a>
                </li>
            
        </ul>
    </nav>
    <nav class="main">
        <ul>
            
            <li class="search">
                <a class="fa-search" href="#search">Search</a>
                <form id="search" method="get" action="//google.com/search">
                    <input type="text" name="q" placeholder="Search" />
                    <input type="hidden" name="q" value="site:https://datadog.github.io/summit-training-session/">
                </form>
            </li>
            <li class="menu">
                <a class="fa-bars" href="#menu">Menu</a>
            </li>
        </ul>
    </nav>
</header>


<section id="menu">

    
        <section>
            <form class="search" method="get" action="//google.com/search">
                <input type="text" name="q" placeholder="Search" />
                <input type="hidden" name="q" value="site:https://datadog.github.io/summit-training-session/">
            </form>
        </section>

    
        <section>
            <ul class="links">
                
                    <li>
                        <a href="/summit-training-session/preso/">
                            <h3>
                                
                                    <i class="fa fa-tv">&nbsp;</i>
                                
                                Presentations
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/summit-training-session/notes/">
                            <h3>
                                
                                    <i class="fa fa-file-text-o">&nbsp;</i>
                                
                                Notes
                            </h3>
                        </a>
                    </li>
                
                    <li>
                        <a href="/summit-training-session/handson/">
                            <h3>
                                
                                    <i class="fa fa-hand-stop-o">&nbsp;</i>
                                
                                Hands On
                            </h3>
                        </a>
                    </li>
                
            </ul>
        </section>

    


    
        
</section>

    
        
            <div class="reveal">
                <div class="slides">
                    <section data-markdown
                        data-separator="^---"
                        data-separator-vertical="^--"
                        data-background="^background:"
                        data-separator-notes="^Note:"
                        data-charset="iso-8859-15">
                        # Building a Custom Agent Check

---
# Agent Architecture

## Four components
### Collector
### Forwarder
### DogstatsD
### SupervisorD
--
# The Collector
## Runs every 15 seconds
## Runs each enabled integration check
## Also runs any custom agent checks
--
# The Forwarder
## Forwards collected metrics to Datadog
## Stores metrics collected in case of network disruption
--
# DogStatsD
## Python implementation of StatsD (Etsy)
## Implements tags
--
# SupervisorD
## Runs master process
## Forks all subprocesses as the user **dd-agent**
---
# Running Checks
## Every 15 seconds Collector collects
## Official integrations
## Custom Checks
--
# Custom Checks

## Checks have both a Python check and YAML configuration
--
# Custom Checks
## Checks in `/etc/dd-agent/checks.d`
## Configurations in `/etc/dd-agent/conf.d`

 **On Linux, see http://docs.datadoghq.com/guides/agent_checks/#directory for other platforms.*
 
--
# Example Configuration

```
init_config:
  min_collection_interval: 20
  key1: val1
  key2: val2
instances:
  - username: jon_smith
    password: 1234

  - username: jane_smith
    password: 5678
```
--
# Checks
## Inherit from **AgentCheck**
## Require a `check(self, instance)` method 
--
# Simple Check 
```
from checks import AgentCheck
class HelloCheck(AgentCheck):
    def check(self, instance):
        self.gauge(&#39;hello.world&#39;, 1)
```
---
# Datadog Metric Types
## Gauge
## Rate
## Count
--
# Gauge
* Record any value
* If not updated, uses previous value
--
# Rate
* Count per unit of time
--
# Count
* Quantity


                    </section>

                    <section>
                        <p><a href="https://datadog.github.io/summit-training-session/">Back to the Agenda</a></p>
                        <a href="https://datadog.github.io/summit-training-session//notes/customagentcheck">Notes</a> | <a href="https://datadog.github.io/summit-training-session//handson/customagentcheck">Hands On Instruction</a>
                    </section>
                    
                </div>
                
            </div>
            <div class="footer"><img src="https://datadog.github.io/summit-training-session//images/ddlogo.png"></div>
        
    
    <script type="text/javascript" src="https://datadog.github.io/summit-training-session//reveal.js/js/reveal.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headjs/0.96/head.min.js"></script>
<script>Reveal.initialize({
    width: 1920, 
    height: 1280,  
    margin: 0.1,
    center: false,    
  minScale: 0.3,
  maxScale: 7,  
  slideNumber: true,
  history: true,  
  embedded: true,  
   dependencies: [
        
        { src: 'https:\/\/datadog.github.io\/summit-training-session\//reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
        { src: 'https:\/\/datadog.github.io\/summit-training-session\//reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } }, 
        { src: 'https:\/\/datadog.github.io\/summit-training-session\//reveal.js/plugin/notes/notes.js', async: true },

    ]
  });</script>
            </div>
        <a id="back-to-top" href="#" class="fa fa-arrow-up fa-border fa-2x"></a>
        

        
        
            
        

        
        
            <script src="https://datadog.github.io/summit-training-session//js/jquery.min.js"></script>
            <script src="https://datadog.github.io/summit-training-session//js/skel.min.js"></script>
            <script src="https://datadog.github.io/summit-training-session//js/util.js"></script>
            <script src="https://datadog.github.io/summit-training-session//js/main.js"></script>
            <script src="https://datadog.github.io/summit-training-session//js/backToTop.js"></script>
            <script src="https://datadog.github.io/summit-training-session//js/highlight.pack.js"></script>
        
        
        
            
            <script>hljs.initHighlightingOnLoad();</script>
            
    </body>
</html>

